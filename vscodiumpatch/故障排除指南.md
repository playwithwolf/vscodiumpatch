# VSCodium è¡¥ä¸é›†æˆæ•…éšœæ’é™¤æŒ‡å—

æœ¬æ–‡æ¡£æä¾›ä½¿ç”¨ `apply-patches-direct.sh` è„šæœ¬æ—¶å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚

## ğŸ”§ è„šæœ¬æ‰§è¡Œé—®é¢˜

### æƒé™é—®é¢˜

**é—®é¢˜**ï¼šè„šæœ¬æ— æ³•æ‰§è¡Œæˆ–æç¤ºæƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# è®¾ç½®æ‰§è¡Œæƒé™
chmod +x vscodiumpatch/scripts/apply-patches-direct.sh
```

### è·¯å¾„é—®é¢˜

**é—®é¢˜**ï¼š"æºç è·¯å¾„ä¸æ˜¯æœ‰æ•ˆçš„ VSCode ç›®å½•"

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿åœ¨ VSCode æºç ç›®å½•ä¸­æ‰§è¡Œè„šæœ¬
2. æ£€æŸ¥ç›®å½•ä¸­æ˜¯å¦å­˜åœ¨ `package.json` å’Œ `product.json` æ–‡ä»¶
3. ç¡®ä¿ç›®å½•ç»“æ„æ­£ç¡®ï¼š
   ```
   vscode/
   â”œâ”€â”€ package.json
   â”œâ”€â”€ product.json
   â””â”€â”€ src/vs/code/electron-main/main.ts
   ```

## ğŸ”§ è¡¥ä¸åº”ç”¨é—®é¢˜

### è¡¥ä¸åº”ç”¨å¤±è´¥

**é—®é¢˜**ï¼šè¡¥ä¸æ— æ³•æ­£ç¡®åº”ç”¨åˆ°ç›®æ ‡æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²è¢«ä¿®æ”¹**ï¼š
   ```bash
   # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦åŒ…å«è¡¥ä¸å†…å®¹
   grep -n "electron-updater" package.json
   grep -n "updateUrl" product.json
   grep -n "autoUpdater" src/vs/code/electron-main/main.ts
   ```

2. **ä»å¤‡ä»½æ¢å¤åŸå§‹æ–‡ä»¶**ï¼š
   ```bash
   # æŸ¥çœ‹å¯ç”¨å¤‡ä»½
   ls -la backup/
   
   # æ¢å¤åŸå§‹æ–‡ä»¶ï¼ˆæ›¿æ¢æ—¶é—´æˆ³ï¼‰
   cp backup/20240101_120000/* ./
   ```

### è¡¥ä¸å·²å­˜åœ¨

**é—®é¢˜**ï¼šè„šæœ¬æ˜¾ç¤º"è¡¥ä¸å·²å­˜åœ¨ï¼Œè·³è¿‡"

**è¯´æ˜**ï¼šè¿™æ˜¯æ­£å¸¸è¡Œä¸ºï¼Œè„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å·²åº”ç”¨çš„è¡¥ä¸å¹¶è·³è¿‡ï¼Œé¿å…é‡å¤åº”ç”¨ã€‚

**å¦‚éœ€é‡æ–°åº”ç”¨**ï¼š
```bash
# ä»å¤‡ä»½æ¢å¤åŸå§‹æ–‡ä»¶åé‡æ–°è¿è¡Œè„šæœ¬
cp backup/20240101_120000/* ./
bash ../vscodiumpatch/scripts/apply-patches-direct.sh
```

## ğŸ”§ éªŒè¯è¡¥ä¸åº”ç”¨

### æ£€æŸ¥è¡¥ä¸æ˜¯å¦æˆåŠŸåº”ç”¨

**æ–¹æ³•**ï¼š
```bash
# æ£€æŸ¥ package.json ä¸­çš„ä¾èµ–
grep -A 5 -B 5 "electron-updater" package.json

# æ£€æŸ¥ product.json ä¸­çš„æ›´æ–°URL
grep -n "updateUrl" product.json

# æ£€æŸ¥ main.ts ä¸­çš„è‡ªåŠ¨æ›´æ–°ä»£ç 
grep -n "autoUpdater" src/vs/code/electron-main/main.ts
```

**é¢„æœŸç»“æœ**ï¼š
- `package.json` åº”åŒ…å« `electron-updater` å’Œ `electron-log` ä¾èµ–
- `product.json` åº”åŒ…å« `"updateUrl": "http://192.168.0.3:3000"`
- `main.ts` åº”åŒ…å«è‡ªåŠ¨æ›´æ–°ç›¸å…³ä»£ç 

## ğŸ”„ æ¢å¤å’Œé‡è¯•

### æ¢å¤åˆ°åŸå§‹çŠ¶æ€

```bash
# ä½¿ç”¨è‡ªåŠ¨å¤‡ä»½æ¢å¤
cp backup/20240101_120000/* ./

# æˆ–ä½¿ç”¨ git é‡ç½®ï¼ˆå¦‚æœåœ¨ git ä»“åº“ä¸­ï¼‰
git checkout -- .
git clean -fd
```

### é‡æ–°åº”ç”¨è¡¥ä¸

```bash
# æ¢å¤åŸå§‹æ–‡ä»¶åé‡æ–°è¿è¡Œè„šæœ¬
bash ../vscodiumpatch/scripts/apply-patches-direct.sh
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é›†æˆæŒ‡å—.md](./é›†æˆæŒ‡å—.md) - å¿«é€Ÿé›†æˆæŒ‡å—å’Œä½¿ç”¨æ–¹æ³•